%h1
  Payment
- if @result
  %div{:style => "color: red;"}
    = h @result.errors.size
    error(s)
= form_for :transaction, :params => @result && @result.params[:transaction], :errors => @result && @result.errors.for(:transaction), :builder => BraintreeFormHelper::BraintreeFormBuilder, :url => Braintree::TransparentRedirect.url, :html => {:autocomplete => "off"} do |f| #TODO: add helper
  = f.label :amount, "Amount"
  = f.text_field :amount
  - if !@customer
    = render :partial => 'non_customer_fields', :locals => {:f => f}
  - else
    = render :partial => 'customer_data'
  = hidden_field_tag :tr_data, @tr_data
  = f.submit "Submit Payment", :class => :btn